const express= require('express')
const cors = require('cors')
const path = require('path')
const mongoose = require('mongoose')
const { Image } = require('./images.models')
const app = express()
const PORT = process.env.PORT || 4000

app.use(cors())
app.use(express.json())
app.use(express.static(path.join(__dirname, 'client/build')))


try {
    mongoose.connect('mongodb+srv://Richinbk:delladmin1@imagedatabase.fe0ef.mongodb.net/Main?retryWrites=true&w=majority', {useNewUrlParser: true, useUnifiedTopology:true})
    .then(() => console.log('connected to database'))
    .catch(() => console.log('Failed to connect to database'))
    
} catch (error) {
    console.log("Something in the databse broke")
}

/*
app.get('*', (req,res) => {
    res.sendFile(path.join(__dirname + '/client/build/index.html'))
})
*/

app.get('/hello', (req, res) => {
    res.send('Hello from the server')
})

app.get('/images', (req,res) => {
    try {
        let test = {name:'ABC', link: 'data:image/jpeg;base64,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'}
        res.json(test)
        /*
        console.log("--- IMages route----")
        Image.find({}, function(err, docs){
            if (err) res.send(err)
            console.log(docs)
            res.json(docs)
        })
        */
    } catch (error) {
        console.log(error)
    }
})

app.post('/images/add', (req,res) => {

    try {
        Image.create({ name: req.body.name, link: req.body.link }, function (err) {
            if (err) return handleError(err);
            // saved!
        });
        res.send('Image Sent')
    } catch (error) {
        console.log(error)
        res.send('Image failed to send')
    }
    
    
})

app.post('/images/remove/:id', (req,res) => {
    try {
        Image.deleteOne({_id: req.params.id}, function(err){
            if (err) console.log(err)
        })
        res.send('Image deleted')
        
    } catch (error) {
        //console.log(error)
        res.send('Image failed to delete')
    }

    
})

app.listen(PORT, () => {
    console.log(`Server started at port ${PORT}`)
})